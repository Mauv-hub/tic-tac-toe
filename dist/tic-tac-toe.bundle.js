(()=>{console.log("JavaScript Beginner Projects: Tic Tac Toe!"),window.addEventListener("DOMContentLoaded",(()=>{t()}));let e=null;const t=()=>{n(),r()},n=()=>{const e=document.getElementById("rows");for(let t=0;t<3;t++){const n=document.createElement("div");n.id="row"+t,n.className="row",e.appendChild(n);for(let e=0;e<3;e++){const r=document.createElement("img");r.className="square",r.id=t+"."+e,r.onclick=o,n.appendChild(r)}}},r=()=>{e={turn:"player",active:!0}},o=t=>{!t.target.src.length&&e.active&&"player"==e.turn&&(t.target.src="x.png",l(),s())},l=()=>{const t=u(c());if(null==t)return;e.active=!1;let n="";n=2==t?"You lose!":1==t?"You win!":"Tie game, try again.",document.getElementById("description").innerText=n},c=()=>{const e=[];for(let t=0;t<3;t++){const n=[];for(let e=0;e<3;e++){const r=document.getElementById(t+"."+e);r.src.includes("x.png")?n.push(1):r.src.includes("o.png")?n.push(2):n.push(3)}e.push(n)}return e},s=t=>{if(e.turn="ai",(e=>{void 0===e&&(e=10);const t=(()=>{const e=[];for(let t=0;t<3;t++)for(let n=0;n<3;n++)e.push(document.getElementById(t+"."+n));return e})();for(const e of t)e.className="square";if(e>=0){setTimeout((()=>{s(e-1)}),100);const t=Math.floor(3*Math.random()),n=Math.floor(3*Math.random());return document.getElementById(t+"."+n).className="square highlight",!0}return!1})(t))return;const n=c(),[r,o]=a(n,2);if(null!=o){const[e,t]=o;document.getElementById(e+"."+t).src="o.png"}l(),e.turn="player"},u=e=>{const t=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[2,0],[1,1],[0,2]]];for(const n of t){let t=null,r=!0;for(const[o,l]of n){const n=e[o][l];null==t&&3!=n?t=n:t!=n&&(r=!1)}if(r)return t}let n=!1;for(let t=0;t<3;t++)for(let r=0;r<3;r++)3==e[t][r]&&(n=!0);return n?null:4},a=(e,t)=>{const n=u(e);if(2==n)return[1,null];if(1==n)return[-1,null];let r,o;return[o,r]=2==t?i(e):d(e),null==r&&(o=0),[o,r]},i=e=>{let t=Number.NEGATIVE_INFINITY,n=null;for(let r=0;r<3;r++)for(let o=0;o<3;o++)if(3==e[r][o]){const l=e.map((e=>e.slice()));l[r][o]=2;const[c,s]=a(l,1);c>t&&(n=[r,o],t=c)}return[t,n]},d=e=>{let t=Number.POSITIVE_INFINITY,n=null;for(let r=0;r<3;r++)for(let o=0;o<3;o++)if(3==e[r][o]){const l=e.map((e=>e.slice()));l[r][o]=1;const[c,s]=a(l,2);c<t&&(n=[r,o],t=c)}return[t,n]}})();